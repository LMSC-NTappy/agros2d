<?xml version="1.0"?>
<module:module xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
	xsi:schemaLocation="XMLModule ../xsd/module_xml.xsd" xmlns:module="XMLModule">

	<module:general id="current" name="Current field">
		<module:description>Electric current is a flow of electric charge
			through a medium. This charge is typically carried by moving
			electrons in a conductor such as wire. It can also be carried by ions
			in an electrolyte, or by both ions and electrons in a plasma.
		</module:description>
		<module:analyses>
			<module:analysis id="steadystate" type="steadystate"
				name="Steady state" solutions="1" />
		</module:analyses>
	</module:general>

	<module:constants />

	<module:volume>
		<module:quantity id="current_conductivity" shortname="cu_gamma" />

		<module:weakforms_volume>
			<module:weakform_volume analysistype="steadystate">
				<module:quantity id="current_conductivity" />

				<module:matrix_form i="1" j="1"
					planar_linear="cu_gamma * (udx * vdx + udy * vdy)" 
					axi_linear="cu_gamma * r * (udr * vdr + udz * vdz)"
					planar_newton="cu_gamma * (udx * vdx + udy * vdy)" 
					axi_newton="cu_gamma * r * (udr * vdr + udz * vdz)"
					symmetric="1" />

				<module:vector_form i="1" j="1" 
					planar_linear="0"
					axi_linear="0" 
					planar_newton="cu_gamma * (updx * vdx + updy * vdy)"
					axi_newton="cu_gamma * r * (updr * vdr + updz * vdz)" />
			</module:weakform_volume>
		</module:weakforms_volume>
	</module:volume>

	<module:surface>
		<module:quantity id="current_potential" shortname="cu_V" />
		<module:quantity id="current_inward_current_flow"
			shortname="cu_Jn" />

		<module:weakforms_surface>
			<module:weakform_surface analysistype="steadystate"
				default="current_potential">
				<module:boundary id="current_potential" name="Fixed voltage">
					<module:quantity id="current_potential" />

                    <module:essential_form i="1"
                        planar_linear="cu_V"
                        axi_linear="cu_V"
                        planar_newton="cu_V"
                        axi_newton="cu_V" />
				</module:boundary>

				<module:boundary id="current_inward_current_flow"
					name="Current density">
					<module:quantity id="current_inward_current_flow" />

					<module:vector_form i="1" j="1" 
						planar_linear="cu_Jn * vval"
						axi_linear="cu_Jn * r * vval" 
						planar_newton="- cu_Jn * vval"
						axi_newton="- cu_Jn * r * vval" />
				</module:boundary>
			</module:weakform_surface>
		</module:weakforms_surface>
	</module:surface>

	<module:preprocessor>
		<module:gui type="volume">
			<module:group>
				<module:quantity id="current_conductivity" name="Conductivity"
					shortname="gamma" shortname_html="&lt;i&gt;&amp;gamma;&lt;/i&gt;"
					shortname_latex="\gamma" unit="S/m" unit_html="S.m&lt;sup&gt;-1&lt;/sup&gt;"
					unit_latex="S \cdot m^{-1}" />
			</module:group>
		</module:gui>
		<module:gui type="surface">
			<module:group>
				<module:quantity id="current_potential" name="Fixed voltage"
					shortname="V" shortname_html="&lt;i&gt;&amp;phi;&lt;/i&gt;"
					shortname_latex="\phi" unit="V" unit_html="V" unit_latex="V" />
				<module:quantity id="current_inward_current_flow"
					name="Current density" shortname="Jn"
					shortname_html="&lt;i&gt;J&lt;/i&gt;&lt;sub&gt;n&lt;/sub&gt;"
					shortname_latex="J_\mathrm{n}" unit="A/m2" unit_html="A.m&lt;sup&gt;-2&lt;/sup&gt;"
					unit_latex="A \cdot m^{-2}" />
			</module:group>
		</module:gui>
	</module:preprocessor>

	<module:postprocessor>
		<module:localvariables>
			<module:localvariable id="current_potential"
				name="Scalar potential" type="scalar" shortname="V"
				shortname_html="&lt;i&gt;V&lt;/i&gt;" shortname_latex="V" unit="V"
				unit_html="V" unit_latex="V">
				<module:expression analysistype="steadystate"
					planar="value1" axi="value1" />
			</module:localvariable>
			<module:localvariable id="current_electric_field"
				name="Electric field" type="vector" shortname="E" shortname_html="&lt;i&gt;E&lt;/i&gt;"
				shortname_latex="E" unit="V/m" unit_html="V.m&lt;sup&gt;-1&lt;/sup&gt;"
				unit_latex="V \cdot m^{-1}">
				<module:expression analysistype="steadystate"
					planar_x="- dx1" planar_y="- dy1" axi_r="- dr1" axi_z="- dz1" />
			</module:localvariable>
			<module:localvariable id="current_current_density"
				name="Current density" type="vector" shortname="J"
				shortname_html="&lt;i&gt;J&lt;/i&gt;" shortname_latex="J" unit="A/m2"
				unit_html="A.m&lt;sup&gt;-2&lt;/sup&gt;" unit_latex="A \cdot m^{-2}">
				<module:expression analysistype="steadystate"
					planar_x="- cu_gamma * dx1" planar_y="- cu_gamma * dy1" axi_r="- cu_gamma * dr1"
					axi_z="- cu_gamma * dz1" />
			</module:localvariable>
			<module:localvariable id="current_joule_losses"
				name="Joule losses" type="scalar" shortname="pj"
				shortname_html="&lt;i&gt;p&lt;/i&gt;&lt;sub&gt;j&lt;/sub&gt;"
				shortname_latex="p_{j}" unit="W/m3" unit_html="W.m&lt;sup&gt;-3&lt;/sup&gt;"
				unit_latex="W \cdot m^{-3}">
				<module:expression analysistype="steadystate"
					planar="cu_gamma * (dx1 * dx1 + dy1 * dy1)" axi="cu_gamma * (dr1 * dr1 + dz1 * dz1)" />
			</module:localvariable>
			<module:localvariable id="current_conductivity"
				name="Conductivity" type="scalar" shortname="gamma"
				shortname_html="&lt;i&gt;&amp;gamma;&lt;/i&gt;" shortname_latex="\gamma"
				unit="S/m" unit_html="S.m&lt;sup&gt;-1&lt;/sup&gt;" unit_latex="S \cdot m^{-1}">
				<module:expression analysistype="steadystate"
					planar="cu_gamma" axi="cu_gamma" />
			</module:localvariable>
		</module:localvariables>

		<module:view>
			<module:scalar_view>
				<module:default analysistype="steadystate" id="current_potential" />
			</module:scalar_view>
			<module:vector_view>
				<module:default analysistype="steadystate"
					id="current_current_density" />
			</module:vector_view>
		</module:view>

		<module:volumeintegrals>
			<module:volumeintegral id="current_volume"
				name="Volume" shortname="V" shortname_html="&lt;i&gt;V&lt;/i&gt;"
				shortname_latex="V" unit="m3" unit_html="m&lt;sup&gt;3&lt;/sup&gt;"
				unit_latex="m^{3}">
				<module:expression analysistype="steadystate"
					planar="1.0" axi="2.0 * PI * r" />
			</module:volumeintegral>
			<module:volumeintegral id="current_cross_section"
				name="Cross section" shortname="S" shortname_html="&lt;i&gt;S&lt;/i&gt;"
				shortname_latex="S" unit="m2" unit_html="m&lt;sup&gt;2&lt;/sup&gt;"
				unit_latex="m^{2}">
				<module:expression analysistype="steadystate"
					planar="1.0" axi="1.0" />
			</module:volumeintegral>
			<module:volumeintegral id="current_joule_losses"
				name="Joule losses" shortname="Pj"
				shortname_html="&lt;i&gt;P&lt;/i&gt;&lt;sub&gt;j&lt;/sub&gt;"
				shortname_latex="P_{j}" unit="W" unit_html="W" unit_latex="W">
				<module:expression analysistype="steadystate"
					planar="cu_gamma * (dx1 * dx1 + dy1 * dy1)" axi="2.0 * PI * r * cu_gamma * (dr1 * dr1 + dz1 * dz1)" />
			</module:volumeintegral>
		</module:volumeintegrals>

		<module:surfaceintegrals>
			<module:surfaceintegral id="current_length"
				name="Length" shortname="l" shortname_html="&lt;i&gt;l&lt;/i&gt;"
				shortname_latex="l" unit="m" unit_html="m" unit_latex="m">
				<module:expression analysistype="steadystate"
					planar="1.0" axi="1.0" />
			</module:surfaceintegral>
			<module:surfaceintegral id="current_surface"
				name="Surface" shortname="S" shortname_html="&lt;i&gt;S&lt;/i&gt;"
				shortname_latex="S" unit="m2" unit_html="m&lt;sup&gt;2&lt;/sup&gt;"
				unit_latex="m^{2}">
				<module:expression analysistype="steadystate"
					planar="1.0" axi="2.0 * PI * r" />
			</module:surfaceintegral>
			<module:surfaceintegral id="current_current"
				name="Current" shortname="I" shortname_html="&lt;i&gt;I&lt;/i&gt;"
				shortname_latex="I" unit="A" unit_html="A" unit_latex="A">
				<module:expression analysistype="steadystate"
					planar="cu_gamma * (tanx * dy1 - tany * dx1)" axi="2.0 * PI * r * cu_gamma * (tanr * dz1 - tanz * dr1)" />
			</module:surfaceintegral>
		</module:surfaceintegrals>
	</module:postprocessor>
</module:module>
