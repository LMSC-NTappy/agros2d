<?xml version="1.0"?>
<module xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xsi:noNamespaceSchemaLocation="module.xsd">
    <general id="electrostatic" name="Electrostatic field">
        <description>Electrostatics is the branch of science that deals with the phenomena and properties of stationary or slow-moving (without acceleration) electric charges.</description>
        <analyses>
            <analysis id="steadystate" type="steadystate" name="Steady state" solutions="1" />
        </analyses>
    </general>

    <constants>
        <constant id="EPS0" value="8.854e-12" />
    </constants>

    <macros />

    <volume>
        <quantity id="electrostatic_permittivity" shortname="el_epsr" />
        <quantity id="electrostatic_charge_density" shortname="el_rho" />

        <weakforms>
            <weakform analysistype="steadystate">
                <quantity id="electrostatic_permittivity" />
                <quantity id="electrostatic_charge_density" />

                <matrix_form i="1" j="1" planar="el_epsr * EPS0 * (udx * vdx + udy * vdy)"
                                    axi="el_epsr * EPS0 * r * (udr * vdr + udz * vdz)" symmetric="1" />
                <vector_form i="1" j="1" planar="el_epsr * EPS0 * (updx * vdx + updy * vdy) - el_rho * vval"
                                    axi="el_epsr * EPS0 * r * (updr * vdr + updz * vdz) - el_rho * r * vval" />
            </weakform>
        </weakforms>
    </volume>

    <surface>
        <quantity id="electrostatic_potential" shortname="V" />
        <quantity id="electrostatic_surface_charge_density" shortname="sigma" />

        <weakforms>
            <weakform analysistype="steadystate" default="electrostatic_potential">
                <boundary id="electrostatic_potential" name="Fixed voltage">
                    <quantity id="electrostatic_potential" />

                    <essential i="1" planar="V"
                                     axi="V" />
                </boundary>

                <boundary id="electrostatic_surface_charge_density" name="Surface charge density">
                    <quantity id="electrostatic_surface_charge_density" />

                    <vector_form i="1" j="1" planar="sigma * vval"
                                        axi="sigma * r * vval" />
                </boundary>
            </weakform>
        </weakforms>
    </surface>

    <preprocessor>
        <volume>
            <group>
                <quantity id="electrostatic_permittivity" name="Permittivity"
                          shortname="epsr" shortname_html="&lt;i&gt;&amp;epsilon;&lt;/i&gt;&lt;sub&gt;r&lt;/sub&gt;" shortname_latex="\varepsilon_{r}"
                          unit="F/m" unit_html="F.m&lt;sup&gt;-1&lt;/sup&gt;" unit_latex="F \cdot m^{-1}" />
                <quantity id="electrostatic_charge_density" name="Charge density"
                          shortname="rho" shortname_html="&lt;i&gt;&amp;rho;&lt;/i&gt;" shortname_latex="\rho"
                          unit="C/m3" unit_html="C.m&lt;sup&gt;-3&lt;/sup&gt;" unit_latex="C \cdot m^{-3}" />
            </group>
        </volume>
        <surface>
            <group>
                <quantity id="electrostatic_potential" name="Fixed voltage"
                          shortname="V" shortname_html="&lt;i&gt;&amp;phi;&lt;/i&gt;" shortname_latex="\phi"
                          unit="V" unit_html="V" unit_latex="V" />
                <quantity id="electrostatic_surface_charge_density" name="Surface charge density"
                          shortname="sigma" shortname_html="&lt;i&gt;&amp;sigma;&lt;/i&gt;" shortname_latex="\sigma"
                          unit="C/m2" unit_html="C.m&lt;sup&gt;-2&lt;/sup&gt;" unit_latex="C \cdot m^{-2}" />
            </group>
        </surface>
    </preprocessor>

    <postprocessor>
        <localvariables>
            <localvariable id="electrostatic_potential" name="Scalar potential" type="scalar"
                           shortname="V" shortname_html="&lt;i&gt;V&lt;/i&gt;" shortname_latex="V"
                           unit="V" unit_html="V" unit_latex="V">
                <expression analysistype="steadystate" planar="value1"
                                                       axi="value1" />
            </localvariable>
            <localvariable id="electrostatic_electric_field" name="Electric field" type="vector"
                           shortname="E" shortname_html="&lt;i&gt;E&lt;/i&gt;" shortname_latex="E"
                           unit="V/m" unit_html="V.m&lt;sup&gt;-1&lt;/sup&gt;" unit_latex="V \cdot m^{-1}">
                <expression analysistype="steadystate" planar_x="- dx1"
                                                       planar_y="- dy1"
                                                       axi_r="- dr1"
                                                       axi_z="- dz1" />
            </localvariable>
            <localvariable id="electrostatic_displacement" name="Displacement" type="vector"
                           shortname="D" shortname_html="&lt;i&gt;D&lt;/i&gt;" shortname_latex = "D"
                           unit="C/m2" unit_html="C.m&lt;sup&gt;-2&lt;/sup&gt;" unit_latex="C \cdot m^{-2}">
                <expression analysistype="steadystate" planar_x="- el_epsr * EPS0 * dx1"
                                                       planar_y="- el_epsr * EPS0 * dy1"
                                                       axi_r="- el_epsr * EPS0 * dr1"
                                                       axi_z="- el_epsr * EPS0 * dz1" />
            </localvariable>
            <localvariable id="electrostatic_energy_density" name="Energy density" type="scalar"
                           shortname="we" shortname_html="&lt;i&gt;w&lt;/i&gt;&lt;sub&gt;e&lt;/sub&gt;" shortname_latex="w_{e}"
                           unit="J/m3" unit_html="J.m&lt;sup&gt;-3&lt;/sup&gt;" unit_latex="J \cdot m^{-3}">
                <expression analysistype="steadystate" planar="0.5 * el_epsr * EPS0 * (dx1 * dx1 + dy1 * dy1)"
                                                       axi="0.5 * el_epsr * EPS0 * (dr1 * dr1 + dz1 * dz1)" />
            </localvariable>
            <localvariable id="electrostatic_permittivity" name="Permittivity" type="scalar"
                           shortname="epsr" shortname_html="&lt;i&gt;&amp;epsilon;&lt;/i&gt;&lt;sub&gt;r&lt;/sub&gt;" shortname_latex="\varepilon_{r}"
                           unit="-" unit_html="-" unit_latex="-">
                <expression analysistype="steadystate" planar="el_epsr"
                                                       axi="el_epsr" />
            </localvariable>
            <localvariable id="electrostatic_charge_density" name="Charge density" type="scalar"
                           shortname="rho" shortname_html="&lt;i&gt;&amp;rho;&lt;/i&gt;" shortname_latex="\rho"
                           unit="C/m3" unit_html="C.m&lt;sup&gt;-3&lt;/sup&gt;" unit_latex="C \cdot m^{-3}">
                <expression analysistype="steadystate" planar="el_rho"
                                                       axi="el_rho" />
            </localvariable>
        </localvariables>

        <view>
            <scalar>
                <default analysistype="steadystate" id="electrostatic_potential" />
            </scalar>
            <vector>
                <default analysistype="steadystate" id="electrostatic_electric_field" />
            </vector>
        </view>

        <volumeintegrals>
            <volumeintegral id="electrostatic_volume" name="Volume"
                            shortname="V" shortname_html="&lt;i&gt;V&lt;/i&gt;" shortname_latex="V"
                            unit="m3" unit_html="m&lt;sup&gt;3&lt;/sup&gt;" unit_latex="m^{3}">
                <expression analysistype="steadystate" planar="1.0"
                                                       axi="2.0 * PI * r" />
            </volumeintegral>
            <volumeintegral id="electrostatic_cross_section" name="Cross section"
                            shortname="S" shortname_html="&lt;i&gt;S&lt;/i&gt;" shortname_latex="S"
                            unit="m2" unit_html="m&lt;sup&gt;2&lt;/sup&gt;" unit_latex="m^{2}">
                <expression analysistype="steadystate" planar="1.0"
                                                       axi="1.0" />
            </volumeintegral>
            <volumeintegral id="electrostatic_energy" name="Energy"
                            shortname="We" shortname_html="&lt;i&gt;W&lt;sub&gt;e&lt;/sub&gt;&lt;/i&gt;" shortname_latex="W_{e}"
                            unit="J" unit_html="J" unit_latex="J">
                <expression analysistype="steadystate" planar="0.5 * el_epsr * EPS0 * (dx1 * dx1 + dy1 * dy1)"
                                                       axi="2.0 * PI * r * 0.5 * el_epsr * EPS0 * (dr1 * dr1 + dz1 * dz1)" />
            </volumeintegral>
        </volumeintegrals>

        <surfaceintegrals>
            <surfaceintegral id="electrostatic_length" name="Length"
                             shortname="l" shortname_html="&lt;i&gt;l&lt;/i&gt;" shortname_latex="l"
                             unit="m" unit_html="m" unit_latex="m">
                <expression analysistype="steadystate" planar="1.0"
                                                       axi="1.0" />
            </surfaceintegral>
            <surfaceintegral id="electrostatic_surface" name="Surface"
                             shortname="S" shortname_html="&lt;i&gt;S&lt;/i&gt;" shortname_latex="S"
                             unit="m2" unit_html="m&lt;sup&gt;2&lt;/sup&gt;" unit_latex="m^{2}">
                <expression analysistype="steadystate" planar="1.0"
                                                       axi="2.0 * PI * r" />
            </surfaceintegral>
            <surfaceintegral id="electrostatic_charge" name="Charge"
                             shortname="Q" shortname_html="&lt;i&gt;Q&lt;/i&gt;" shortname_latex="Q"
                             unit="C" unit_html="C" unit_latex="C">
                <expression analysistype="steadystate" planar="el_epsr * EPS0 * (tany * dx1 - tanx * dy1)"
                                                       axi="2.0 * PI * r * el_epsr * EPS0 * (tanz * dr1 - tanr * dz1)" />
            </surfaceintegral>
        </surfaceintegrals>
    </postprocessor>
</module>
