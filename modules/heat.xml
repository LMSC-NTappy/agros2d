<?xml version="1.0"?>
<module>
    <general id ="heat" name="Heat transfer">
        <description>Heat transfer is a discipline of thermal engineering that concerns the exchange of thermal energy from one physical system to another. Heat transfer is classified into various mechanisms, such as heat conduction, convection and thermal radiation.</description>
        <properties steadystate="1" harmonic="0" transient="1" />
    </general>

    <constants />

    <material>
        <item id="heat_conductivity" name="Thermal conductivity" shortname="lambda" unit="W/m.K" default="385" />
        <item id="heat_volume_heat" name="Volume heat" shortname="p" unit="W/m3" />
        <item id="heat_density" name="Density" shortname="rho" unit="kg/m3" default="7800" />
        <item id="heat_specific_heat" name="Specific heat" shortname="cp" unit="J/kg.K" default="400" />
        
    	<steadystate>
            <material id="heat_conductivity" />
            <material id="heat_volume_heat" />

            <matrix i="1" j="1" planar="0.0 * uval * (updx * vdx + updy * vdy) + lambda * (udx * vdx + udy * vdy)"
                                axi="0.0 * r * uval * (updr * vdr + updz * vdz) + lambda * r * (udr * vdr + udz * vdz)" symmetric="1" />
            <vector i="1" j="1" planar="lambda * (updx * vdx + updy * vdy) - p * vval"
                                axi="lambda * r * (updr * vdr + updz * vdz) - p * r * vval" />
        </steadystate>
        
    	<transient>
            <material id="heat_conductivity" />
            <material id="heat_volume_heat" />
            <material id="heat_density" />
            <material id="heat_specific_heat" />

            <matrix i="1" j="1" planar="0.0 * uval * (updx * vdx + updy * vdy) + lambda * (udx * vdx + udy * vdy) + 0 * uval * upval * vval / deltat + rho * cp * uval * vval / deltat"
                                axi="0.0 * r * uval * (updr * vdr + updz * vdz) + lambda * r * (udr * vdr + udz * vdz) + 0 * r * uval * upval * vval / deltat + r * rho * cp * uval * vval / deltat" symmetric="1" />
            <vector i="1" j="1" planar="lambda * (updx * vdx + updy * vdy) - p * vval + rho * cp * (upval - uptval) * vval / deltat"
                                axi="lambda * r * (updr * vdr + updz * vdz) - p * r * vval + r * rho * cp * (upval - uptval) * vval / deltat" />
        </transient>        
    </material>

    <boundary>
        <item id="heat_temperature" name="Temperature" shortname="T" unit="K" />
    	<item id="heat_heat_flux" name="Heat flux" shortname="f" unit="W/m2" />
        <item id="heat_heat_transfer_coefficient" name="Heat transfer coefficient" shortname="h" unit="W/m2.K" default="5" />
        <item id="heat_external_temperature" name="External temperature" shortname="Te" unit="K" default="20" />
    	
    	<steadystate>
            <boundary id="heat_temperature" name="Temperature">
                <item id="heat_temperature" />

                <essential i="1" j="1" id="heat_temperature" />
            </boundary>

            <boundary id="heat_heat_flux" name="Heat flux">
                <item id="heat_heat_flux" />
                <item id="heat_heat_transfer_coefficient" />
                <item id="heat_external_temperature" />

                <matrix i="1" j="1" planar="h * uval * vval"
                                    axi="h * r * uval * vval" symmetric="1" />
                <vector i="1" j="1" planar="((- f - h * Te) + h * upval) * vval"
                                    axi="r * ((- f - h * Te) + h * upval) * vval" />
            </boundary>
        </steadystate>
        
    	<transient>
            <boundary id="heat_temperature" name="Temperature">
                <item id="heat_temperature" />

                <essential i="1" j="1" id="heat_temperature" />
            </boundary>

            <boundary id="heat_heat_flux" name="Heat flux">
                <item id="heat_heat_flux" />
                <item id="heat_heat_transfer_coefficient" />
                <item id="heat_external_temperature" />

                <matrix i="1" j="1" planar="h * uval * vval"
                                    axi="h * r * uval * vval" symmetric="1" />
                <vector i="1" j="1" planar="((-f - h * Te) + h * upval) * vval"
                                    axi="r * ((-f - h * Te) + h * upval) * vval" />
            </boundary>
        </transient>        
    </boundary>

    <localvariable>
        <item id="heat_temperature" name="Temperature" shortname="T" unit="K" scalar="1">
            <steadystate planar_scalar="value1" axi_scalar="value1" />
            <transient planar_scalar="value1" axi_scalar="value1" />
        </item>
        <item id="heat_heat_flux" name="Heat flux" shortname="F" unit="W/m2" scalar="0">
            <steadystate planar_comp_x="- lambda * dx1" planar_comp_y="- lambda * dy1" axi_comp_r="- lambda * dr1" axi_comp_z="- lambda * dz1" />
            <transient planar_comp_x="- lambda * dx1" planar_comp_y="- lambda * dy1" axi_comp_r="- lambda * dr1" axi_comp_z="- lambda * dz1" />
        </item>
        <item id="heat_temperature_gradient" name="Temperature gradient" shortname="G" unit="K/m" scalar="0">
            <steadystate planar_comp_x="- dx1" planar_comp_y="- dy1" axi_comp_r="- dr1" axi_comp_z="- dz1" />
            <transient planar_comp_x="- dx1" planar_comp_y="- dy1" axi_comp_r="- dr1" axi_comp_z="- dz1" />
        </item>
        <item id="heat_conductivity" name="Thermal conductivity" shortname="lambda" unit="W/m.K" scalar="1">
            <steadystate planar_scalar="lambda" axi_scalar="lambda" />
            <transient planar_scalar="lambda" axi_scalar="lambda" />
        </item>
        <item id="heat_volume_heat" name="Volume heat" shortname="p" unit="W/m3" scalar="1">
            <steadystate planar_scalar="p" axi_scalar="p" />
            <transient planar_scalar="p" axi_scalar="p" />
        </item>
        <item id="heat_density" name="Density" shortname="rho" unit="kg/m3" scalar="1">
            <transient planar_scalar="rho" axi_scalar="rho" />
        </item>
        <item id="heat_specific_heat" name="Specific heat" shortname="cp" unit="J/kg.K" scalar="1">
            <transient planar_scalar="cp" axi_scalar="cp" />
        </item>
    </localvariable>

    <view>
        <scalarvariable>
            <steadystate default="heat_temperature">
                <item id="heat_temperature" />
                <item id="heat_heat_flux" />
                <item id="heat_temperature_gradient" />
                <item id="heat_conductivity" />
                <item id="heat_volume_heat" />
            </steadystate>
            <transient default="heat_temperature">
                <item id="heat_temperature" />
                <item id="heat_heat_flux" />
                <item id="heat_temperature_gradient" />
                <item id="heat_conductivity" />
                <item id="heat_volume_heat" />
                <item id="heat_density" />
                <item id="heat_specific_heat" />
            </transient>
        </scalarvariable>

        <vectorvariable>
            <steadystate default="heat_heat_flux">
                <item id="heat_temperature_gradient" />
                <item id="heat_heat_flux" />
            </steadystate>
            <transient default="heat_heat_flux">
                <item id="heat_temperature_gradient" />
                <item id="heat_heat_flux" />
            </transient>
        </vectorvariable>
    </view>

    <pointvalue>
        <steadystate>
            <item id="heat_temperature" />
            <item id="heat_heat_flux" />
            <item id="heat_temperature_gradient" />
            <item id="heat_conductivity" />
            <item id="heat_volume_heat" />
        </steadystate>
        <transient>
            <item id="heat_temperature" />
            <item id="heat_heat_flux" />
            <item id="heat_temperature_gradient" />
            <item id="heat_conductivity" />
            <item id="heat_volume_heat" />
            <item id="heat_density" />
            <item id="heat_specific_heat" />
        </transient>
    </pointvalue>

    <volumeintegral>
        <item id="volume" name="Volume" shortname="V" unit="m3">
            <steadystate planar="1.0" axi="2.0 * PI * r" />
            <transient planar="1.0" axi="2.0 * PI * r" />
        </item>
        <item id="surface" name="Cross section" shortname="S" unit="m2">
            <steadystate planar="1.0" axi="1.0" />
            <transient planar="1.0" axi="1.0" />
        </item>
        <item id="heat_temperature" name="Temperature" shortname="T" unit="T.m3">
            <steadystate planar="value1" axi="2.0 * PI * r * value1" />
            <transient planar="value1" axi="2.0 * PI * r * value1" />
        </item>
    </volumeintegral>

    <surfaceintegral>
        <item id="length" name="Length" shortname="l" unit="m">
            <steadystate planar="1.0" axi="1.0" />
            <transient planar="1.0" axi="1.0" />
        </item>
        <item id="surface" name="Surface" shortname="S" unit="m2">
            <steadystate planar="1.0" axi="2.0 * PI * r" />
            <transient planar="1.0" axi="2.0 * PI * r" />
        </item>
        <item id="heat_temperature" name="Temperature" shortname="T" unit="T.m2">
            <steadystate planar="value1" axi="2.0 * PI * r * value1" />
            <transient planar="value1" axi="2.0 * PI * r * value1" />
        </item>
        <item id="heat_heat_flux" name="Heat flux" shortname="f" unit="W">
            <steadystate planar="- lambda * (tany * dx1 - tanx * dy1)"
                         axi="- 2.0 * PI * r * lambda * (tanz * dr1 - tanr * dz1)" />
            <transient planar="- lambda * (tany * dx1 - tanx * dy1)"
                        axi="- 2.0 * PI * r * lambda * (tanz * dr1 - tanr * dz1)" />
        </item>
    </surfaceintegral>
</module>
