<?xml version="1.0"?>
<module xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xsi:noNamespaceSchemaLocation="module.xsd">
    <general id="electrostatic" name="Electrostatic field">
        <description>Electrostatics is the branch of science that deals with the phenomena and properties of stationary or slow-moving (without acceleration) electric charges.</description>
        <analyses>
            <analysis id="steadystate" type="steadystate" name="Steady state" solutions="1" />
        </analyses>
    </general>

    <constants>
        <constant id="EPS0" value="8.854e-12" />
    </constants>

    <macros>
        <macro id="" expression="" />
    </macros>

    <volume>
        <quantity id="electrostatic_permittivity" shortname="epsr" />
        <quantity id="electrostatic_charge_density" shortname="rho" />

        <weakforms>
            <weakform analysistype="steadystate">
                <quantity id="electrostatic_permittivity" />
                <quantity id="electrostatic_charge_density" />

                <matrix i="1" j="1" planar="epsr * EPS0 * (udx * vdx + udy * vdy)"
                                    axi="epsr * EPS0 * r * (udr * vdr + udz * vdz)" symmetric="1" />
                <vector i="1" j="1" planar="epsr * EPS0 * (updx * vdx + updy * vdy) - rho * vval"
                                    axi="epsr * EPS0 * r * (updr * vdr + updz * vdz) - rho * r * vval" />
            </weakform>
        </weakforms>
    </volume>

    <surface>
        <quantity id="electrostatic_potential" shortname="V" />
        <quantity id="electrostatic_surface_charge_density" shortname="sigma" />

        <weakforms>
            <weakform analysistype="steadystate" default="electrostatic_potential">
                <boundary id="electrostatic_potential" name="Fixed voltage">
                    <quantity id="electrostatic_potential" />

                    <essential i="1" planar="V"
                                     axi="V" />
                </boundary>

                <boundary id="electrostatic_surface_charge_density" name="Surface charge density">
                    <quantity id="electrostatic_surface_charge_density" />

                    <vector i="1" j="1" planar="sigma * vval"
                                        axi="sigma * r * vval" />
                </boundary>
            </weakform>
        </weakforms>
    </surface>

    <preprocessor>
        <volume>
            <group>
                <quantity id="electrostatic_permittivity" name="Permittivity"
                          shortname="epsr" shortname_html="&lt;i&gt;&epsilon;&lt;/i&gt;" shortname_latex="\varepsilon_{r}"
                          unit="F/m" unit_html="F.m&lt;sup&gt;-1&lt;/sup&gt;" unit_latex="F \cdot m^{-1}" />
                <quantity id="electrostatic_charge_density" name="Charge density"
                          shortname="rho" shortname_html="&lt;i&gt;&rho;&lt;/i&gt;" shortname_html="\rho"
                          unit="C/m3" unit_html="C.m&lt;sup&gt;-3&lt;/sup&gt;" unit_latex="C \cdot m^{-3}" />
            </group>
        </volume>
        <surface>
            <group>
                <quantity id="electrostatic_potential" name="Fixed voltage"
                          shortname="V" shortname_html="&lt;i&gt;&phi;&lt;/i&gt;"
                          unit="V" unit_html="V" />
                <quantity id="electrostatic_surface_charge_density" name="Surface charge density"
                          shortname="sigma" shortname_html="&lt;i&gt;&sigma;&lt;/i&gt;" shortname="\sigma"
                          unit="C/m2" unit_html="C.m&lt;sup&gt;-2&lt;/sup&gt;" unit_latex="C \cdot m^{-2}" />
            </group>
        </surface>
    </preprocessor>

    <postprocessor>
        <localvariables>
            <localvariable id="electrostatic_potential" name="Scalar potential" shortname="V" shortname_html="&lt;i&gt;V&lt;/i&gt;"
                           unit="V" type="scalar">
                <expression analysistype="steadystate" planar="value1"
                                                       axi="value1" />
            </localvariable>
            <localvariable id="electrostatic_electric_field" name="Electric field" shortname="E" shortname_html="&lt;i&gt;E&lt;/i&gt;"
                           unit="V/m" unit_html="V.m&lt;sup&gt;-1&lt;/sup&gt;" unit_latex="V \cdot m^{-1}" type="vector">
                <expression analysistype="steadystate" planar_x="- dx1"
                                                       planar_y="- dy1"
                                                       axi_r="- dr1"
                                                       axi_z="- dz1" />
            </localvariable>
            <localvariable id="electrostatic_displacement" name="Displacement" shortname="D" shortname_html="&lt;i&gt;D&lt;/i&gt;"
                           unit="C/m2" unit_html="C.m&lt;sup&gt;-2&lt;/sup&gt;" unit_latex="C \cdot m^{-2}" type="vector">
                <expression analysistype="steadystate" planar_x="- epsr * EPS0 * dx1"
                                                       planar_y="- epsr * EPS0 * dy1"
                                                       axi_r="- epsr * EPS0 * dr1"
                                                       axi_z="- epsr * EPS0 * dz1" />
            </localvariable>
            <localvariable id="electrostatic_energy_density" name="Energy density" shortname="we" shortname_html="&lt;i&gt;w&lt;sub&gt;e&lt;/sub&gt;&lt;/i&gt;"
                           shortname_latex="w_{e}" unit="J/m3" unit_html="J.m&lt;sup&gt;-3&lt;/sup&gt;" unit_latex="J \cdot m^{-3}" type="scalar">
                <expression analysistype="steadystate" planar="0.5 * epsr * EPS0 * (dx1 * dx1 + dy1 * dy1)"
                                                       axi="0.5 * epsr * EPS0 * (dr1 * dr1 + dz1 * dz1)" />
            </localvariable>
            <localvariable id="electrostatic_permittivity" name="Permittivity" shortname="epsr" shortname_html="&lt;i&gt;&epsilon;&lt;sub&gt;r&lt;/sub&gt;&lt;/i&gt;"
                           shortname_latex="\varepilon_{r}" unit="-" type="scalar">
                <expression analysistype="steadystate" planar="epsr"
                                                       axi="epsr" />
            </localvariable>
            <localvariable id="electrostatic_charge_density" name="Charge density" shortname="rho" shortname_html="&lt;i&gt;&rho;&lt;/i&gt;"
                           shortname_latex="\rho" unit="C/m3" unit_html="C.m&lt;sup&gt;-3&lt;/sup&gt;" unit_latex="C \cdot m^{-3}" type="scalar">
                <expression analysistype="steadystate" planar="rho"
                                                       axi="rho" />
            </localvariable>
        </localvariables>

        <view>
            <scalar>
                <default analysistype="steadystate" id="electrostatic_potential" />
            </scalar>
            <vector>
                <default analysistype="steadystate" id="electrostatic_electric_field" />
            </vector>
        </view>

        <volumeintegrals>
            <volumeintegral id="volume" name="Volume" shortname="V" shortname_html="&lt;i&gt;V&lt;/i&gt;"
                            unit="m3" unit_html="m&lt;sup&gt;3&lt;/sup&gt;" unit_latex="m^{3}">
                <expression analysistype="steadystate" planar="1.0"
                                                      axi="2.0 * PI * r" />
            </volumeintegral>
            <volumeintegral id="surface" name="Cross section" shortname="S" shortname_html="&lt;i&gt;D&lt;/i&gt;"
                            unit="m2" unit_html="m&lt;sup&gt;2&lt;/sup&gt;" unit_latex="m^{2}">
                <expression analysistype="steadystate" planar="1.0"
                                                      axi="1.0" />
            </volumeintegral>
            <volumeintegral id="electrostatic_energy" name="Energy" shortname="We" shortname_html="&lt;i&gt;W&lt;sub&gt;e&lt;/sub&gt;&lt;/i&gt;"
                            shortname_latex="W_{e}" unit="J">
                <expression analysistype="steadystate" planar="0.5 * epsr * EPS0 * (dx1 * dx1 + dy1 * dy1)"
                                                      axi="2.0 * PI * r * 0.5 * epsr * EPS0 * (dr1 * dr1 + dz1 * dz1)" />
            </volumeintegral>
        </volumeintegrals>

        <surfaceintegrals>
            <surfaceintegral id="length" name="Length" shortname="l" shortname_html="&lt;i&gt;l&lt;/i&gt;" unit="m">
                <expression analysistype="steadystate" planar="1.0"
                                                      axi="1.0" />
            </surfaceintegral>
            <surfaceintegral id="surface" name="Surface" shortname="S" shortname_html="&lt;i&gt;S&lt;/i&gt;"
                             unit="m2" unit_html="m&lt;sup&gt;2&lt;/sup&gt;" unit_latex="m^{2}">
                <expression analysistype="steadystate" planar="1.0"
                                                      axi="2.0 * PI * r" />
            </surfaceintegral>
            <surfaceintegral id="electrostatic_charge" name="Charge" shortname="Q" shortname_html="&lt;i&gt;Q&lt;/i&gt;" unit="C">
                <expression analysistype="steadystate" planar="epsr * EPS0 * (tany * dx1 - tanx * dy1)"
                                                      axi="2.0 * PI * r * epsr * EPS0 * (tanz * dr1 - tanr * dz1)" />
            </surfaceintegral>
        </surfaceintegrals>
    </postprocessor>
</module>
