<?xml version="1.0"?>
<module>
    <general id ="current" name="Current field">
        <description>Electric current is a flow of electric charge through a medium. This charge is typically carried by moving electrons in a conductor such as wire. It can also be carried by ions in an electrolyte, or by both ions and electrons in a plasma.</description>
        <properties steadystate="1" harmonic="0" transient="0" />
    </general>

    <constants />

    <material>
        <item id="current_conductivity" name="Conductivity" shortname="gamma" unit="S/m" />   	
        
    	<steadystate>
            <material id="current_conductivity" />

            <matrix i="1" j="1" planar="gamma * (udx * vdx + udy * vdy)"
                                axi="gamma * r * (udr * vdr + udz * vdz)" symmetric="1" />
            <vector i="1" j="1" planar="gamma * (updx * vdx + updy * vdy)"
                                axi="gamma * r * (updr * vdr + updz * vdz)" />
        </steadystate>
    </material>

    <boundary>
    	<item id="current_potential" name="Fixed voltage" shortname="V" unit="V" />
    	<item id="current_inward_current_flow" name="Current density" shortname="Jn" unit="A/m2" />
    	
    	<steadystate>
            <boundary id="current_potential" name="Fixed voltage">
                <item id="current_potential" />

                <essential i="1" id="current_potential" />
            </boundary>

            <boundary id="current_inward_current_flow" name="Current density">
                <item id="current_inward_current_flow" />

                <vector i="1" planar="- Jn * vval" axi="- Jn * r * vval" />
            </boundary>
        </steadystate>
    </boundary>

    <localvariable>
        <item id="current_potential" name="Scalar potential" shortname="V" unit="V" scalar="1">
            <steadystate planar_scalar="value1" axi_scalar="value1" />
        </item>
        <item id="current_electric_field" name="Electric field" shortname="E" unit="V/m" scalar="0">
            <steadystate planar_comp_x="- dx1" planar_comp_y="- dy1" axi_comp_r="- dr1" axi_comp_z="- dz1" />
        </item>
        <item id="current_current_density" name="Current density" shortname="J" unit="A/m2" scalar="0">
            <steadystate planar_comp_x="- gamma * dx1" planar_comp_y="- gamma * dy1" axi_comp_r="- gamma * dr1" axi_comp_z="- gamma * dz1" />
        </item>
        <item id="current_joule_losses" name="Joule losses" shortname="pj" unit="W/m3" scalar="1">
            <steadystate planar_scalar="gamma * (dx1 * dx1 + dy1 * dy1)" axi_scalar="gamma * (dr1 * dr1 + dz1 * dz1)" />
        </item>
        <item id="current_conductivity" name="Conductivity" shortname="gamma" unit="S/m" scalar="1">
            <steadystate planar_scalar="gamma" axi_scalar="gamma" />
        </item>
    </localvariable>

    <view>
        <scalarvariable>
            <steadystate default="current_potential">
                <item id="current_potential" />
                <item id="current_electric_field" />
                <item id="current_current_density" />
                <item id="current_joule_losses" />
                <item id="current_conductivity" />
            </steadystate>
        </scalarvariable>

        <vectorvariable>
            <steadystate default="current_current_density">
                <item id="current_electric_field" />
                <item id="current_current_density" />
            </steadystate>
        </vectorvariable>
    </view>

    <pointvalue>
        <steadystate>
            <item id="current_potential" />
            <item id="current_electric_field" />
            <item id="current_current_density" />
            <item id="current_joule_losses" />
            <item id="current_conductivity" />
        </steadystate>
    </pointvalue>

    <volumeintegral>
        <item id="volume" name="Volume" shortname="V" unit="m3">
            <steadystate planar="1.0" axi="2.0 * PI * r" />
        </item>
        <item id="surface" name="Cross section" shortname="S" unit="m2">
            <steadystate planar="1.0" axi="1.0" />
        </item>
        <item id="current_joule_losses" name="Joule losses" shortname="Pj" unit="W">
            <steadystate planar="gamma * (dx1 * dx1 + dy1 * dy1)" axi="2.0 * PI * r * gamma * (dr1 * dr1 + dz1 * dz1)" />
        </item>
    </volumeintegral>

    <surfaceintegral>
        <item id="length" name="Length" shortname="l" unit="m">
            <steadystate planar="1.0" axi="1.0" />
        </item>
        <item id="surface" name="Surface" shortname="S" unit="m2">
            <steadystate planar="1.0" axi="2.0 * PI * r" />
        </item>
        <item id="current_current" name="Current" shortname="I" unit="A">
            <steadystate planar="gamma * (tanx * dy1 - tany * dx1)" axi="2.0 * PI * r * gamma * (tanr * dz1 - tanz * dr1)" />
        </item>
    </surfaceintegral>
</module>
